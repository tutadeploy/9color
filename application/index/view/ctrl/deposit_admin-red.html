<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>5.我的-6提现记录</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="stylesheet" href="/static/home/css/style.css" />

    <script src="/static/home/js/jquery.js"></script>
    <script src="/static/home/js/lib.js"></script>
</head>

<body>
    <div class="header header3">
        <a href="/my" class="g-return"></a>
        <h1>提现记录</h1>
    </div>
    <div class="lc-box1">

    </div>
    <div class="wp">
        <ul class="mx-list tx-list" id="newsList">

        </ul>

        <div class="loadmore" id="moreNews" onclick="moreNews()">查看更多</div>
    </div>
    <script>
        $(function () {
            $('.pagination-container select').attr('disabled', 'disabled');
        })
    </script>
    <script>
        var pageNo = 1;

        $(function () {
            ajaxHonor(pageNo, 20);
        })

        function moreNews() {
            pageNo++;
            ajaxHonor(pageNo, 20);
        }

        function ajaxHonor(page, limit) {
            //提交 Ajax 成功后，静态更新表格中的数据
            $.ajax({
                url: '/deposit/page',
                method: 'get',
                data: {
                    pageNo: page,
                    pageSize: limit
                },
                dataType: "json",
                success: function (res) {
                    console.log(res);
                    if (res.success) {
                        initHtml(res.data.records, res.data.current >= res.data.pages);
                    }
                }
            });
        }


        function initHtml(newsList, hideBtn) {
            var html = "";
            if (hideBtn) {
                $("#moreNews").remove();
            }

            for (var i = 0; i < newsList.length; i++) {
                var obj = newsList[i];

                var statusHtml = '';

                switch (obj.status) {
                    case 1:
                        statusHtml = '<span class="status status1">待审核</span>';
                        break;
                    case 2:
                        statusHtml = '<span class="status status2">审核通过</span>';
                        break;
                    case 3:
                        statusHtml = '<span class="status status1">审核失败</span>';
                        break;
                }

                html += '<li>' +
                    '<div class="txt">' +
                    '<div class="s1">提现' +
                    statusHtml +
                    '</div>' +
                    ' <div class="s2">订单号：' + obj.orderNo + '</div>' +
                    '</div>' +
                    '<div class="price price2">-' + obj.num.toFixed(2) + '</div>' +
                    '</li>';

            }

            $("#newsList").append(html);
        }


    </script>
</body>

</html>