# ç°æˆåŸŸåæ•…éšœè½¬ç§»å·¥å…·å¯¹æ¯”åˆ†æ

## ğŸ¯ é‡è¦æé†’

æ‚¨è¯´å¾—å¯¹ï¼**ç¡®å®æœ‰å¾ˆå¤šç°æˆçš„å·¥å…·å’Œæ¡†æ¶**ï¼Œä¸éœ€è¦å…¨éƒ¨è‡ªå·±å†™è„šæœ¬ã€‚ä»¥ä¸‹æ˜¯å„ç§ç°æˆè§£å†³æ–¹æ¡ˆçš„è¯¦ç»†å¯¹æ¯”ï¼š

---

## ğŸ† æ¨èæ–¹æ¡ˆï¼ˆç°æˆå·¥å…·ï¼‰

### æ–¹æ¡ˆä¸€ï¼šCloudflare + ç®€å•å®¢æˆ·ç«¯ï¼ˆæ¨èï¼‰

**å·²æœ‰åŠŸèƒ½ï¼š**
- âœ… Cloudflareæœ¬èº«å°±æ˜¯ä¸“ä¸šçš„DNSæ•…éšœè½¬ç§»æœåŠ¡
- âœ… å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡éƒ½æ˜¯ç°æˆçš„
- âœ… å…¨çƒCDNåŠ é€Ÿ

**åªéœ€è¦æ·»åŠ ï¼š**
```javascript
// æç®€å®¢æˆ·ç«¯æ£€æŸ¥å™¨ï¼ˆåªéœ€20è¡Œä»£ç ï¼‰
class SimpleDomainChecker {
    constructor() {
        this.domains = ['domain1.com', 'domain2.net', 'domain3.org'];
        this.checkInterval = 60000; // 1åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
        this.startCheck();
    }
    
    async checkCurrentDomain() {
        try {
            const response = await fetch('/api/health', { method: 'HEAD', timeout: 5000 });
            return response.ok;
        } catch {
            return false;
        }
    }
    
    async switchToNextDomain() {
        const currentIndex = this.domains.indexOf(window.location.hostname);
        const nextIndex = (currentIndex + 1) % this.domains.length;
        const nextDomain = this.domains[nextIndex];
        window.location.href = `https://${nextDomain}${window.location.pathname}`;
    }
    
    startCheck() {
        setInterval(async () => {
            if (!await this.checkCurrentDomain()) {
                this.switchToNextDomain();
            }
        }, this.checkInterval);
    }
}

new SimpleDomainChecker();
```

**æˆæœ¬ï¼š** Cloudflare Proè®¡åˆ’ $20/æœˆ/åŸŸå

---

## ğŸ› ï¸ ç°æˆå·¥å…·åˆ†ç±»

### 1. äº‘æœåŠ¡æä¾›å•†ï¼ˆæœ€ç®€å•ï¼‰

#### A. AWS Route 53 å¥åº·æ£€æŸ¥
```yaml
ä¼˜ç‚¹:
  - ğŸ’° æŒ‰ä½¿ç”¨é‡ä»˜è´¹ï¼ˆ$0.50/å¥åº·æ£€æŸ¥/æœˆï¼‰
  - ğŸŒ å…¨çƒåˆ†å¸ƒå¼æ£€æŸ¥
  - ğŸ”§ é›¶ç»´æŠ¤æˆæœ¬
  - ğŸ“Š CloudWatché›†æˆç›‘æ§

ç¼ºç‚¹:
  - ğŸ’¸ æˆæœ¬è¾ƒé«˜ï¼ˆå¤šåŸŸåï¼‰
  - ğŸ”’ ç»‘å®šAWSç”Ÿæ€

é€‚ç”¨åœºæ™¯: å·²ä½¿ç”¨AWSçš„é¡¹ç›®
```

**é…ç½®ç¤ºä¾‹ï¼š**
```bash
# ä½¿ç”¨AWS CLIåˆ›å»ºå¥åº·æ£€æŸ¥
aws route53 create-health-check \
    --caller-reference "domain1-health-$(date +%s)" \
    --health-check-config \
    Type=HTTPS,ResourcePath=/api/health,FullyQualifiedDomainName=domain1.com
```

#### B. Azure Traffic Manager
```yaml
ä¼˜ç‚¹:
  - ğŸ¯ åœ°ç†ä½ç½®è·¯ç”±
  - ğŸ’° æˆæœ¬é€‚ä¸­ï¼ˆ$0.54/100ä¸‡æŸ¥è¯¢ï¼‰
  - ğŸ”§ ç®€å•é…ç½®

ç¼ºç‚¹:
  - ğŸ”’ ç»‘å®šAzureç”Ÿæ€
  - ğŸ• DNS TTLé™åˆ¶

é€‚ç”¨åœºæ™¯: ä½¿ç”¨Azureçš„é¡¹ç›®
```

#### C. Google Cloud Load Balancing
```yaml
ä¼˜ç‚¹:
  - âš¡ æ€§èƒ½ä¼˜ç§€
  - ğŸ›¡ï¸ DDoSé˜²æŠ¤å†…ç½®
  - ğŸ’° å‰100ä¸‡è¯·æ±‚å…è´¹

ç¼ºç‚¹:
  - ğŸ”’ ç»‘å®šGCPç”Ÿæ€
  - ğŸ“š å­¦ä¹ æ›²çº¿

é€‚ç”¨åœºæ™¯: ä½¿ç”¨GCPçš„é¡¹ç›®
```

### 2. å¼€æºDNS/è´Ÿè½½å‡è¡¡å·¥å…·

#### A. HAProxyï¼ˆå¼ºçƒˆæ¨èï¼‰
```yaml
ä¼˜ç‚¹:
  - ğŸ†“ å®Œå…¨å…è´¹
  - ğŸ”§ åŠŸèƒ½å¼ºå¤§
  - ğŸ“ˆ é«˜æ€§èƒ½
  - ğŸŒ å¹¿æ³›ä½¿ç”¨

ç¼ºç‚¹:
  - ğŸ“š é…ç½®å¤æ‚
  - ğŸ–¥ï¸ éœ€è¦æœåŠ¡å™¨ç®¡ç†

é€‚ç”¨åœºæ™¯: æœ‰è¿ç»´èƒ½åŠ›çš„å›¢é˜Ÿ
```

**HAProxyé…ç½®ç¤ºä¾‹ï¼š**
```bash
# å®‰è£…HAProxy
sudo apt install haproxy

# é…ç½®æ–‡ä»¶ /etc/haproxy/haproxy.cfg
global
    daemon

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend domain_frontend
    bind *:80
    bind *:443 ssl crt /etc/ssl/certs/
    redirect scheme https if !{ ssl_fc }
    
    # åŸŸåæ£€æŸ¥å’Œåˆ‡æ¢é€»è¾‘
    acl domain1_dead nbsrv(domain1_servers) lt 1
    acl domain2_dead nbsrv(domain2_servers) lt 1
    
    use_backend domain2_servers if domain1_dead
    use_backend domain3_servers if domain1_dead domain2_dead
    default_backend domain1_servers

backend domain1_servers
    option httpchk GET /api/health
    server domain1 domain1.com:443 check ssl verify none

backend domain2_servers
    option httpchk GET /api/health
    server domain2 domain2.net:443 check ssl verify none

backend domain3_servers
    option httpchk GET /api/health
    server domain3 domain3.org:443 check ssl verify none
```

#### B. Nginx Plusï¼ˆå•†ä¸šç‰ˆï¼‰
```yaml
ä¼˜ç‚¹:
  - ğŸ”§ é…ç½®ç›¸å¯¹ç®€å•
  - ğŸ“Š å¯è§†åŒ–ç®¡ç†ç•Œé¢
  - âš¡ é«˜æ€§èƒ½

ç¼ºç‚¹:
  - ğŸ’° éœ€è¦å•†ä¸šè®¸å¯è¯
  - ğŸ”’ éƒ¨åˆ†åŠŸèƒ½ä»˜è´¹

é€‚ç”¨åœºæ™¯: å·²ä½¿ç”¨Nginxçš„å•†ä¸šé¡¹ç›®
```

#### C. Traefikï¼ˆå®¹å™¨åŒ–æ¨èï¼‰
```yaml
ä¼˜ç‚¹:
  - ğŸ³ åŸç”Ÿæ”¯æŒDocker/K8s
  - ğŸ”§ è‡ªåŠ¨æœåŠ¡å‘ç°
  - ğŸ“Š ç°ä»£åŒ–ç®¡ç†ç•Œé¢

ç¼ºç‚¹:
  - ğŸ³ ä¸»è¦é€‚ç”¨äºå®¹å™¨ç¯å¢ƒ
  - ğŸ“š å¯¹ä¼ ç»Ÿéƒ¨ç½²æ”¯æŒæœ‰é™

é€‚ç”¨åœºæ™¯: å®¹å™¨åŒ–éƒ¨ç½²
```

**Traefiké…ç½®ç¤ºä¾‹ï¼š**
```yaml
# docker-compose.yml
version: '3.8'
services:
  traefik:
    image: traefik:v3.0
    command:
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--entrypoints.web.address=:80"
      - "--entrypoints.websecure.address=:443"
    ports:
      - "80:80"
      - "443:443"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  app:
    image: your-app:latest
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.app.rule=Host(`domain1.com`,`domain2.net`,`domain3.org`)"
      - "traefik.http.routers.app.tls=true"
      - "traefik.http.services.app.loadbalancer.healthcheck.path=/api/health"
```

### 3. DNSæœåŠ¡æä¾›å•†

#### A. NS1ï¼ˆä¸“ä¸šDNSï¼‰
```yaml
ä¼˜ç‚¹:
  - ğŸ¯ ä¸“ä¸šDNSæœåŠ¡
  - ğŸ“Š è¯¦ç»†åˆ†æ
  - âš¡ è¶…å¿«å“åº”

ç¼ºç‚¹:
  - ğŸ’° ä»·æ ¼è¾ƒé«˜ï¼ˆ$8/ç™¾ä¸‡æŸ¥è¯¢ï¼‰
  - ğŸ“š é…ç½®å¤æ‚

é€‚ç”¨åœºæ™¯: å¤§å‹ä¼ä¸šé¡¹ç›®
```

#### B. Dyn/Oracle Internet Intelligence
```yaml
ä¼˜ç‚¹:
  - ğŸ¢ ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ
  - ğŸ›¡ï¸ å¼ºå¤§çš„DDoSé˜²æŠ¤
  - ğŸ“ ä¸“ä¸šæŠ€æœ¯æ”¯æŒ

ç¼ºç‚¹:
  - ğŸ’°ğŸ’° ä»·æ ¼å¾ˆé«˜
  - ğŸ“‹ éœ€è¦ä¼ä¸šåˆåŒ

é€‚ç”¨åœºæ™¯: å¤§å‹ä¼ä¸š
```

### 4. å¼€æºDNSæœåŠ¡å™¨

#### A. PowerDNS
```yaml
ä¼˜ç‚¹:
  - ğŸ†“ å¼€æºå…è´¹
  - ğŸ”§ é«˜åº¦å¯å®šåˆ¶
  - ğŸ“Š æ”¯æŒå¤šç§åç«¯å­˜å‚¨

ç¼ºç‚¹:
  - ğŸ–¥ï¸ éœ€è¦è‡ªå·±è¿ç»´
  - ğŸ“š å­¦ä¹ æ›²çº¿é™¡å³­

é€‚ç”¨åœºæ™¯: æœ‰DNSè¿ç»´ç»éªŒçš„å›¢é˜Ÿ
```

#### B. CoreDNS
```yaml
ä¼˜ç‚¹:
  - ğŸ³ äº‘åŸç”Ÿè®¾è®¡
  - ğŸ”Œ æ’ä»¶åŒ–æ¶æ„
  - ğŸ†“ å®Œå…¨å¼€æº

ç¼ºç‚¹:
  - ğŸ³ ä¸»è¦é¢å‘Kubernetes
  - ğŸ“š ä¼ ç»Ÿç¯å¢ƒé…ç½®å¤æ‚

é€‚ç”¨åœºæ™¯: Kubernetesç¯å¢ƒ
```

---

## ğŸ’° æˆæœ¬å¯¹æ¯”åˆ†æ

| æ–¹æ¡ˆ | åˆå§‹æˆæœ¬ | æœˆè¿è¥æˆæœ¬ | ç»´æŠ¤æˆæœ¬ | æ€»ä½“è¯„åˆ† |
|------|----------|------------|----------|----------|
| **Cloudflare Pro** | $0 | $20/åŸŸå | å¾ˆä½ | â­â­â­â­â­ |
| **AWS Route 53** | $0 | $0.5/æ£€æŸ¥ | å¾ˆä½ | â­â­â­â­ |
| **HAProxyè‡ªå»º** | $0 | $0 | ä¸­ç­‰ | â­â­â­â­ |
| **Azure Traffic Manager** | $0 | $0.54/ç™¾ä¸‡æŸ¥è¯¢ | ä½ | â­â­â­â­ |
| **Traefik** | $0 | $0 | ä½ | â­â­â­ |
| **NS1** | $0 | $8/ç™¾ä¸‡æŸ¥è¯¢ | ä½ | â­â­â­ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆé€‰æ‹©

### å°å‹é¡¹ç›®ï¼ˆæ¨èï¼šCloudflareï¼‰
```bash
# ç›´æ¥ä½¿ç”¨Cloudflare Load Balancing
# åªéœ€è¦åœ¨å‰ç«¯æ·»åŠ 20è¡ŒJavaScriptæ£€æŸ¥ä»£ç 
# æˆæœ¬ï¼š$20/æœˆ/åŸŸå
# ç»´æŠ¤ï¼šå‡ ä¹ä¸ºé›¶
```

### ä¸­å‹é¡¹ç›®ï¼ˆæ¨èï¼šHAProxy + Cloudflareï¼‰
```bash
# HAProxyåšæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡
# CloudflareåšDNSå±‚æ•…éšœè½¬ç§»
# æˆæœ¬ï¼šæœåŠ¡å™¨æˆæœ¬ + $20/æœˆ
# ç»´æŠ¤ï¼šä¸­ç­‰
```

### å¤§å‹é¡¹ç›®ï¼ˆæ¨èï¼šäº‘æœåŠ¡å•†æ–¹æ¡ˆï¼‰
```bash
# AWS Route 53 + CloudFront
# æˆ– Azure Traffic Manager + CDN
# æˆæœ¬ï¼šæŒ‰ä½¿ç”¨é‡è®¡è´¹
# ç»´æŠ¤ï¼šå¾ˆä½
```

### å®¹å™¨åŒ–é¡¹ç›®ï¼ˆæ¨èï¼šTraefikï¼‰
```bash
# Docker + Traefik + Cloudflare
# æˆæœ¬ï¼šæœåŠ¡å™¨æˆæœ¬ + $20/æœˆ
# ç»´æŠ¤ï¼šä½
```

---

## ğŸš€ æœ€ç®€å•æ–¹æ¡ˆï¼ˆ5åˆ†é’Ÿéƒ¨ç½²ï¼‰

### æ­¥éª¤1ï¼šä½¿ç”¨Cloudflare Load Balancing
1. åœ¨Cloudflareæ§åˆ¶å°åˆ›å»ºHealth Check
2. åˆ›å»ºPoolæŒ‡å‘æ‚¨çš„æœåŠ¡å™¨
3. åˆ›å»ºLoad Balancer

### æ­¥éª¤2ï¼šæ·»åŠ æç®€å®¢æˆ·ç«¯æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
```html
<script>
// åªéœ€è¦è¿™20è¡Œä»£ç ï¼
setInterval(async () => {
    try {
        const response = await fetch('/api/health', { 
            method: 'HEAD', 
            cache: 'no-cache',
            signal: AbortSignal.timeout(5000)
        });
        
        if (!response.ok) {
            throw new Error('Health check failed');
        }
    } catch (error) {
        // å½“å‰åŸŸåä¸å¯ç”¨ï¼Œåˆ‡æ¢åˆ°å¤‡ç”¨åŸŸå
        const domains = ['domain1.com', 'domain2.net', 'domain3.org'];
        const current = window.location.hostname;
        const currentIndex = domains.indexOf(current);
        const nextIndex = (currentIndex + 1) % domains.length;
        
        if (nextIndex !== currentIndex) {
            window.location.href = `https://${domains[nextIndex]}${window.location.pathname}`;
        }
    }
}, 60000); // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
</script>
```

### æ­¥éª¤3ï¼šå®Œæˆï¼
- æ€»é…ç½®æ—¶é—´ï¼š< 30åˆ†é’Ÿ
- æœˆæˆæœ¬ï¼š$20/åŸŸå
- ç»´æŠ¤å·¥ä½œï¼šåŸºæœ¬ä¸ºé›¶

---

## ğŸ’¡ ç»“è®ºå’Œå»ºè®®

### ğŸ¯ æœ€ä½³å®è·µå»ºè®®

1. **å°å‹é¡¹ç›®**: ç›´æ¥ç”¨ **Cloudflare Load Balancing**ï¼ŒåŠ 20è¡ŒJSä»£ç 
2. **ä¸­å‹é¡¹ç›®**: **HAProxy + Cloudflare** ç»„åˆ
3. **å¤§å‹ä¼ä¸š**: **AWS/Azure/GCP** çš„æ‰˜ç®¡æœåŠ¡
4. **å®¹å™¨åŒ–**: **Traefik + Cloudflare** ç»„åˆ

### âš ï¸ é¿å…è‡ªå»ºçš„æƒ…å†µ

- å›¢é˜Ÿæ²¡æœ‰è¿ç»´ç»éªŒ
- é¡¹ç›®è§„æ¨¡è¾ƒå°
- é¢„ç®—æœ‰é™
- å¸Œæœ›å¿«é€Ÿä¸Šçº¿

### âœ… è€ƒè™‘è‡ªå»ºçš„æƒ…å†µ

- æœ‰ä¸“ä¸šè¿ç»´å›¢é˜Ÿ
- å¯¹æˆæœ¬æ•æ„Ÿ
- éœ€è¦é«˜åº¦å®šåˆ¶
- æœ‰ç‰¹æ®Šåˆè§„è¦æ±‚

**æ€»ç»“ï¼šå¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œä½¿ç”¨ Cloudflare + ç®€å•å®¢æˆ·ç«¯ä»£ç  å°±è¶³å¤Ÿäº†ï¼Œä¸éœ€è¦è‡ªå·±å†™å¤æ‚çš„è„šæœ¬ï¼** ğŸ‰ 